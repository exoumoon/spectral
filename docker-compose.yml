services:
    server:
        build: .
        ports:
            - "25565:25565"
        volumes:
            - ./data:/data
        environment:
            EULA: "TRUE"
            VERSION: "1.20.1"
            TYPE: "FABRIC"
            FABRIC_VERSION: "0.15.11"
            PACKWIZ_URL: "https://raw.githubusercontent.com/exoumoon/spectral/main/pack.toml"

            MEMORY: "10G"
            USE_AIKAR_FLAGS: "true"
            ENABLE_AUTOPAUSE: "true"
            VIEW_DISTANCE: 12

            MODE: "survival"
            DIFFICULTY: "hard"
            MAX_PLAYERS: "8"
            ALLOW_FLIGHT: "true"

            MOTD: "Le server for cats :3"
            ICON: "https://raw.githubusercontent.com/exoumoon/spectral/main/assets/icon.png"

            ONLINE_MODE: "false"
            # ENABLE_WHITELIST: "true"
            # WHITELIST: |
            #     mxxntype
            # OPS: |
            #     mxxntype

            RCON_CMDS_STARTUP: |-
                /team add New
                /team add Old

            RCON_CMDS_ON_CONNECT: |-
                /team join New @a[team=]
                /clear @a[team=New]
                /execute as @a run function vanilla_refresh:other/actions/mob/mob_health_disable
                /team join Old @a[team=New]

            RCON_CMDS_FIRST_CONNECT: |-
                /whitelist on
                /whitelist add mxxntype
                /op mxxntype
                /gamerule keepInventory true

